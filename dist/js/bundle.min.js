"use strict";var loanForm={step1:{credit_type:"",loan_amount:"",loan_term:""},step2:{fname:"",lname:"",gender:""},step4:{salary:""},step5:{info:""}},ctaBtn=document.getElementById("cta-loan"),intro=document.querySelector(".small-loan__starter"),form=document.querySelector(".small-loan__form");ctaBtn.addEventListener("click",function(){intro.style.display="none",showQuestion(pageNo),form.style.display="block"});var formSteps=document.querySelectorAll(".small-loan__form__step"),pageNo=0;function showQuestion(e){formSteps.forEach(function(e){return e.style.display="none"}),formSteps[e].style.display="flex"}function getSelectValue(e){return e[e.selectedIndex].value}function validateRadio(e){var t=!1;return e.forEach(function(e){e.checked&&(t=!0)}),!t&&showAlert("Please select radio button value"),t}var alerAnchor=document.querySelector(".progress-bar");function showAlert(e){var t='<div class="errormsg">'+e+"</div>";alerAnchor.insertAdjacentHTML("afterend",t)}function removeAler(){var e=document.querySelector(".errormsg");if(e)return e.parentNode.removeChild(e)}function getRadioValue(e){var t="";return e.forEach(function(e){e.checked&&(t=e.value)}),t}function required(e){return 0!==e.length||(showAlert("The mandatory information is missing or incorrect!"),!1)}function validateText(e){return!!e.match(/^[A-Za-z\s]*$/)||(showAlert("The mandatory information must be letters only!"),!1)}function validateTextNumbers(e){return!!e.match(/^[0-9a-zA-Z]+$/)||(showAlert("The mandatory information must be letters & numbers only!"),!1)}function validateNumber(e){return!(parseFloat(e)<0||e.length>12)||(showAlert("Please enter correct amount (from 0 to 12 digits)"),!1)}var buttonBack=document.querySelectorAll(".js-back");buttonBack[0].style.visibility="hidden",buttonBack.forEach(function(e){e.addEventListener("click",function(){removeAler(),progressBarOnBack(pageNo),pageNo>0&&pageNo--,showQuestion(pageNo)})});var applicationForwardBtn=document.getElementById("application-forward");applicationForwardBtn.addEventListener("click",function(){removeAler();var e=document.getElementById("credit_type");if(required(getSelectValue(e))){loanForm.step1.credit_type=getSelectValue(e);var t=document.getElementById("loan_amount").value;if(required(t)&&validateNumber(t)){loanForm.step1.loan_amount=t;var o=document.getElementById("loan_term");required(getSelectValue(o))&&(loanForm.step1.loan_term=getSelectValue(o),showQuestion(++pageNo),progressBar(pageNo))}}});var gender=document.getElementsByName("gender"),contactsForwardBtn=document.getElementById("contacts-forward");contactsForwardBtn.addEventListener("click",function(){removeAler();var e=document.getElementById("fname").value;if(required(e)&&validateText(e)){loanForm.step2.fname=e;var t=document.getElementById("lname").value;if(required(t)&&validateText(t)){loanForm.step2.lname=t;var o=document.getElementsByName("gender");if(validateRadio(o)){loanForm.step2.gender=getRadioValue(o);var r=document.getElementById("docNo").value;required(r)&&validateTextNumbers(r)&&(loanForm.step2.docNo=r,showQuestion(++pageNo),progressBar(pageNo))}}}});var obligationForwardBtn=document.getElementById("obligation-forward");obligationForwardBtn.addEventListener("click",function(){removeAler();var e=document.getElementById("obligation-type"),t=document.getElementById("obligation-financer"),o=document.getElementById("obligation-term").value,r=document.getElementById("obligation-amount").value,n=document.getElementById("obligation-monthly-payement").value;if(""!=getSelectValue(e)||""!=getSelectValue(t)||""!=o||""!=r||""!=n){if(!required(getSelectValue(e)))return;if(!required(getSelectValue(t)))return;if(!required(o)||!validateNumber(o))return;if(!required(r)||!validateNumber(r))return;if(!required(n)||!validateNumber(n))return;loanForm.step3||(loanForm.step3={}),loanForm.step3.oblType=getSelectValue(e),loanForm.step3.oblFinancer=getSelectValue(t),loanForm.step3.oblTerm=o,loanForm.step3.oblAmount=r,loanForm.step3.oblPayment=n}else loanForm.step3&&delete loanForm.step3;showQuestion(++pageNo),progressBar(pageNo)});var incomeForwardBtn=document.getElementById("income-forward");incomeForwardBtn.addEventListener("click",function(){removeAler();var e=document.getElementById("salary").value;if(required(e)&&validateNumber(e)){loanForm.step4.salary=e;var t=document.getElementById("income-other").value;""!==t&&validateNumber(t)?loanForm.step4.incomeOther=t:loanForm.step4.incomeOther&&delete loanForm.step4.incomeOther;var o=document.getElementById("selfEmployer");o.checked?loanForm.step4.employer=o.value:loanForm.step4.employer="worker",showQuestion(++pageNo),progressBar(pageNo)}});var confirmBtn=document.getElementById("confirm");confirmBtn.addEventListener("click",function(){removeAler();var e=document.getElementById("additional-info").value;loanForm.step5.info=""!==e?e:"No additional information",console.log(loanForm),form.style.display="none",printOut(),document.querySelector(".small-loan__results").style.display="block"});var allIncomes=document.querySelectorAll(".js-allIncomes");function sumarize(){var e=document.querySelectorAll(".js-allIncomes"),t=document.getElementById("total-income"),o=0;e.forEach(function(e){e.value&&(o+=parseFloat(e.value))}),t.textContent=o+" EUR"}function sortObject(e){return Object.keys(e).sort().reduce(function(t,o){return t[o]=e[o],t},{})}allIncomes.forEach(function(e){e.addEventListener("change",sumarize),e.addEventListener("keyup",sumarize)});var printContainer=document.querySelector(".print-out");function printOut(){var e="";for(var t in sortObject(loanForm)){e+='<h3 class="heading-tertiary">'+printValues[t]+"</h3>";var o="";for(var r in loanForm[t])o+='\n\t\t\t\t\t<li class="small-loan__results__items">\n\t\t\t\t\t\t<span class="small-loan__results__key">'+printValues[r]+'</span>\n\t\t\t\t\t\t<span class="small-loan__results__value">'+(printValues[loanForm[t][r]]?printValues[loanForm[t][r]]:loanForm[t][r])+"</span>\n\t\t\t\t\t</li>\n\t\t\t";e+='<ul class="small-loan__results__list">'+o+"</ul>"}printContainer.innerHTML=e}var filler=document.querySelector(".progress-bar__h-line--filler"),progresBarBulbs=document.querySelectorAll(".progress-bar__item");function progressBar(e){progresBarBulbs[e].style.backgroundColor="#ee7023",progresBarBulbs[e-1].innerHTML='<i class="fa fa-check"></i>',filler.style.width=25*e+"%"}function progressBarOnBack(e){progresBarBulbs[e].style.backgroundColor="#fdc129",progresBarBulbs[e-1].innerHTML=""+e,filler.style.width=25*e+"%"}var printValues={step1:"Loan details",step2:"Contact information",step3:"Obligation details",step4:"Your income",step5:"Additional information",loan_amount:"Loan amount",loan_term:"Loan term",fname:"First name",lname:"Last name",gender:"Gender",salary:"Main Income",info:"Additional information",personal_credit:"Personal credit",familyHh_credit:"Family/household credit",female:"Female",male:"Male",other:"Other",oblType:"Type of obligation",oblFinancer:"Obligation financer",oblTerm:"Term (year)",oblAmount:"Amount/limit",oblPayment:"Monthly payment",home_loan:"Home loan",consumer_loan:"Consumer loan",car_lease:"Car lease",luminor:"Luminor Bank",seb:"SEB Bank",fast_credit:"Fast Credit",incomeOther:"Other Incomes",selfempl:"Self employee",worker:"Worker",employer:"Type of employment",credit_type:"Type of Credit"};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJsb2FuRm9ybSIsInN0ZXAxIiwiY3JlZGl0X3R5cGUiLCJsb2FuX2Ftb3VudCIsImxvYW5fdGVybSIsInN0ZXAyIiwiZm5hbWUiLCJsbmFtZSIsImdlbmRlciIsInN0ZXA0Iiwic2FsYXJ5Iiwic3RlcDUiLCJpbmZvIiwiY3RhQnRuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImludHJvIiwicXVlcnlTZWxlY3RvciIsImZvcm0iLCJhZGRFdmVudExpc3RlbmVyIiwic3R5bGUiLCJkaXNwbGF5Iiwic2hvd1F1ZXN0aW9uIiwicGFnZU5vIiwiZm9ybVN0ZXBzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJzdGVwIiwiZ2V0U2VsZWN0VmFsdWUiLCJzZWxlY3QiLCJzZWxlY3RlZEluZGV4IiwidmFsdWUiLCJ2YWxpZGF0ZVJhZGlvIiwicmFkaW8iLCJ2YWxpZGF0aW9uIiwiZWwiLCJjaGVja2VkIiwic2hvd0FsZXJ0IiwiYWxlckFuY2hvciIsIm1zZyIsImNvbnRlbnQiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJyZW1vdmVBbGVyIiwiYWxlcnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJnZXRSYWRpb1ZhbHVlIiwicmVxdWlyZWQiLCJpdGVtIiwibGVuZ3RoIiwidmFsaWRhdGVUZXh0IiwiaW5wdXQiLCJtYXRjaCIsInZhbGlkYXRlVGV4dE51bWJlcnMiLCJ2YWxpZGF0ZU51bWJlciIsInBhcnNlRmxvYXQiLCJidXR0b25CYWNrIiwidmlzaWJpbGl0eSIsImJ0biIsInByb2dyZXNzQmFyT25CYWNrIiwiYXBwbGljYXRpb25Gb3J3YXJkQnRuIiwicHJvZ3Jlc3NCYXIiLCJnZXRFbGVtZW50c0J5TmFtZSIsImNvbnRhY3RzRm9yd2FyZEJ0biIsImRvY05vIiwib2JsaWdhdGlvbkZvcndhcmRCdG4iLCJvYmxUeXBlIiwib2JsRmluYW5jZXIiLCJvYmxUZXJtIiwib2JsQW1vdW50Iiwib2JsUGF5bWVudCIsInN0ZXAzIiwiaW5jb21lRm9yd2FyZEJ0biIsImluY29tZU90aGVyIiwiZW1wbG95ZXIiLCJjb25maXJtQnRuIiwiY29uc29sZSIsImxvZyIsInByaW50T3V0IiwiYWxsSW5jb21lcyIsInN1bWFyaXplIiwiaXRlbXMiLCJzaG93VG90SW5jb21lIiwic3VtIiwidGV4dENvbnRlbnQiLCJzb3J0T2JqZWN0IiwibyIsIk9iamVjdCIsImtleXMiLCJzb3J0IiwicmVkdWNlIiwiciIsImsiLCJpbmNvbWUiLCJwcmludENvbnRhaW5lciIsImh0bWwiLCJwcmludFZhbHVlcyIsInN0ZXBrZXkiLCJpbm5lckhUTUwiLCJmaWxsZXIiLCJwcm9ncmVzQmFyQnVsYnMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJ3aWR0aCIsInBlcnNvbmFsX2NyZWRpdCIsImZhbWlseUhoX2NyZWRpdCIsImZlbWFsZSIsIm1hbGUiLCJvdGhlciIsImhvbWVfbG9hbiIsImNvbnN1bWVyX2xvYW4iLCJjYXJfbGVhc2UiLCJsdW1pbm9yIiwic2ViIiwiZmFzdF9jcmVkaXQiLCJzZWxmZW1wbCIsIndvcmtlciJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBQUEsVUFDQUMsT0FDQUMsWUFBQSxHQUNBQyxZQUFBLEdBQ0FDLFVBQUEsSUFFQUMsT0FDQUMsTUFBQSxHQUNBQyxNQUFBLEdBQ0FDLE9BQUEsSUFHQUMsT0FDQUMsT0FBQSxJQUVBQyxPQUNBQyxLQUFBLEtBTUFDLE9BQUFDLFNBQUFDLGVBQUEsWUFDQUMsTUFBQUYsU0FBQUcsY0FBQSx3QkFDQUMsS0FBQUosU0FBQUcsY0FBQSxxQkFFQUosT0FBQU0saUJBQUEsUUFBQSxXQUNBSCxNQUFBSSxNQUFBQyxRQUFBLE9BQ0FDLGFBQUFDLFFBQ0FMLEtBQUFFLE1BQUFDLFFBQUEsVUFJQSxJQUFBRyxVQUFBVixTQUFBVyxpQkFBQSwyQkFDQUYsT0FBQSxFQUVBLFNBQUFELGFBQUFDLEdBQ0FDLFVBQUFFLFFBQUEsU0FBQUMsR0FBQSxPQUFBQSxFQUFBUCxNQUFBQyxRQUFBLFNBQ0FHLFVBQUFELEdBQUFILE1BQUFDLFFBQUEsT0FPQSxTQUFBTyxlQUFBQyxHQUNBLE9BQUFBLEVBQUFBLEVBQUFDLGVBQUFDLE1BR0EsU0FBQUMsY0FBQUMsR0FDQSxJQUFBQyxHQUFBLEVBUUEsT0FQQUQsRUFBQVAsUUFBQSxTQUFBUyxHQUNBQSxFQUFBQyxVQUNBRixHQUFBLE1BSUFBLEdBQUFHLFVBQUEsb0NBQ0FILEVBSUEsSUFBQUksV0FBQXhCLFNBQUFHLGNBQUEsaUJBQ0EsU0FBQW9CLFVBQUFFLEdBQ0EsSUFBQUMsRUFBQUEseUJBQUFELEVBQUEsU0FDQUQsV0FBQUcsbUJBQUEsV0FBQUQsR0FHQSxTQUFBRSxhQUNBLElBQUFDLEVBQUE3QixTQUFBRyxjQUFBLGFBQ0EsR0FBQTBCLEVBQ0EsT0FBQUEsRUFBQUMsV0FBQUMsWUFBQUYsR0FHQSxTQUFBRyxjQUFBYixHQUNBLElBQUFGLEVBQUEsR0FRQSxPQVBBRSxFQUFBUCxRQUFBLFNBQUFTLEdBQ0FBLEVBQUFDLFVBQ0FMLEVBQUFJLEVBQUFKLFNBS0FBLEVBR0EsU0FBQWdCLFNBQUFDLEdBQ0EsT0FBQSxJQUFBQSxFQUFBQyxTQUNBWixVQUFBLHVEQUNBLEdBS0EsU0FBQWEsYUFBQUMsR0FDQSxRQUFBQSxFQUFBQyxNQUFBLG1CQUNBZixVQUFBLG9EQUNBLEdBS0EsU0FBQWdCLG9CQUFBRixHQUNBLFFBQUFBLEVBQUFDLE1BQUEsb0JBQ0FmLFVBQUEsOERBQ0EsR0FLQSxTQUFBaUIsZUFBQUgsR0FFQSxRQUFBSSxXQUFBSixHQUFBLEdBQUFBLEVBQUFGLE9BQUEsTUFDQVosVUFBQSxzREFDQSxHQVNBLElBQUFtQixXQUFBMUMsU0FBQVcsaUJBQUEsWUFDQStCLFdBQUEsR0FBQXBDLE1BQUFxQyxXQUFBLFNBQ0FELFdBQUE5QixRQUFBLFNBQUFnQyxHQUNBQSxFQUFBdkMsaUJBQUEsUUFBQSxXQUNBdUIsYUFDQWlCLGtCQUFBcEMsUUFFQUEsT0FBQSxHQUNBQSxTQUdBRCxhQUFBQyxZQUtBLElBQUFxQyxzQkFBQTlDLFNBQUFDLGVBQUEsdUJBQ0E2QyxzQkFBQXpDLGlCQUFBLFFBQUEsV0FDQXVCLGFBQ0EsSUFBQXhDLEVBQUFZLFNBQUFDLGVBQUEsZUFDQSxHQUFBZ0MsU0FBQW5CLGVBQUExQixJQUFBLENBQ0FGLFNBQUFDLE1BQUFDLFlBQUEwQixlQUFBMUIsR0FFQSxJQUFBQyxFQUFBVyxTQUFBQyxlQUFBLGVBQUFnQixNQUNBLEdBQUFnQixTQUFBNUMsSUFBQW1ELGVBQUFuRCxHQUFBLENBQ0FILFNBQUFDLE1BQUFFLFlBQUFBLEVBRUEsSUFBQUMsRUFBQVUsU0FBQUMsZUFBQSxhQUNBZ0MsU0FBQW5CLGVBQUF4QixNQUNBSixTQUFBQyxNQUFBRyxVQUFBd0IsZUFBQXhCLEdBR0FrQixlQURBQyxRQUVBc0MsWUFBQXRDLGFBS0EsSUFBQWYsT0FBQU0sU0FBQWdELGtCQUFBLFVBQ0FDLG1CQUFBakQsU0FBQUMsZUFBQSxvQkFDQWdELG1CQUFBNUMsaUJBQUEsUUFBQSxXQUNBdUIsYUFDQSxJQUFBcEMsRUFBQVEsU0FBQUMsZUFBQSxTQUFBZ0IsTUFDQSxHQUFBZ0IsU0FBQXpDLElBQUE0QyxhQUFBNUMsR0FBQSxDQUNBTixTQUFBSyxNQUFBQyxNQUFBQSxFQUVBLElBQUFDLEVBQUFPLFNBQUFDLGVBQUEsU0FBQWdCLE1BQ0EsR0FBQWdCLFNBQUF4QyxJQUFBMkMsYUFBQTNDLEdBQUEsQ0FDQVAsU0FBQUssTUFBQUUsTUFBQUEsRUFFQSxJQUFBQyxFQUFBTSxTQUFBZ0Qsa0JBQUEsVUFDQSxHQUFBOUIsY0FBQXhCLEdBQUEsQ0FDQVIsU0FBQUssTUFBQUcsT0FBQXNDLGNBQUF0QyxHQUVBLElBQUF3RCxFQUFBbEQsU0FBQUMsZUFBQSxTQUFBZ0IsTUFDQWdCLFNBQUFpQixJQUFBWCxvQkFBQVcsS0FDQWhFLFNBQUFLLE1BQUEyRCxNQUFBQSxFQUdBMUMsZUFEQUMsUUFFQXNDLFlBQUF0QyxjQUlBLElBQUEwQyxxQkFBQW5ELFNBQUFDLGVBQUEsc0JBQ0FrRCxxQkFBQTlDLGlCQUFBLFFBQUEsV0FDQXVCLGFBQ0EsSUFBQXdCLEVBQUFwRCxTQUFBQyxlQUFBLG1CQUNBb0QsRUFBQXJELFNBQUFDLGVBQUEsdUJBQ0FxRCxFQUFBdEQsU0FBQUMsZUFBQSxtQkFBQWdCLE1BQ0FzQyxFQUFBdkQsU0FBQUMsZUFBQSxxQkFBQWdCLE1BQ0F1QyxFQUFBeEQsU0FBQUMsZUFBQSwrQkFBQWdCLE1BR0EsR0FBQSxJQUFBSCxlQUFBc0MsSUFBQSxJQUFBdEMsZUFBQXVDLElBQ0EsSUFBQUMsR0FBQSxJQUFBQyxHQUFBLElBQUFDLEVBQUEsQ0FDQSxJQUFBdkIsU0FBQW5CLGVBQUFzQyxJQUFBLE9BQ0EsSUFBQW5CLFNBQUFuQixlQUFBdUMsSUFBQSxPQUNBLElBQUFwQixTQUFBcUIsS0FBQWQsZUFBQWMsR0FBQSxPQUNBLElBQUFyQixTQUFBc0IsS0FBQWYsZUFBQWUsR0FBQSxPQUNBLElBQUF0QixTQUFBdUIsS0FBQWhCLGVBQUFnQixHQUFBLE9BRUF0RSxTQUFBLFFBQ0FBLFNBQUEsVUFHQUEsU0FBQXVFLE1BQUFMLFFBQUF0QyxlQUFBc0MsR0FDQWxFLFNBQUF1RSxNQUFBSixZQUFBdkMsZUFBQXVDLEdBQ0FuRSxTQUFBdUUsTUFBQUgsUUFBQUEsRUFDQXBFLFNBQUF1RSxNQUFBRixVQUFBQSxFQUNBckUsU0FBQXVFLE1BQUFELFdBQUFBLE9BRUF0RSxTQUFBLGNBQUFBLFNBQUF1RSxNQUdBakQsZUFEQUMsUUFFQXNDLFlBQUF0QyxVQUlBLElBQUFpRCxpQkFBQTFELFNBQUFDLGVBQUEsa0JBQ0F5RCxpQkFBQXJELGlCQUFBLFFBQUEsV0FDQXVCLGFBQ0EsSUFBQWhDLEVBQUFJLFNBQUFDLGVBQUEsVUFBQWdCLE1BQ0EsR0FBQWdCLFNBQUFyQyxJQUFBNEMsZUFBQTVDLEdBQUEsQ0FDQVYsU0FBQVMsTUFBQUMsT0FBQUEsRUFFQSxJQUFBK0QsRUFBQTNELFNBQUFDLGVBQUEsZ0JBQUFnQixNQUNBLEtBQUEwQyxHQUFBbkIsZUFBQW1CLEdBQ0F6RSxTQUFBUyxNQUFBZ0UsWUFBQUEsRUFDQXpFLFNBQUFTLE1BQUEsb0JBQUFULFNBQUFTLE1BQUFnRSxZQUVBLElBQUFDLEVBQUE1RCxTQUFBQyxlQUFBLGdCQUNBMkQsRUFBQXRDLFFBQ0FwQyxTQUFBUyxNQUFBaUUsU0FBQUEsRUFBQTNDLE1BRUEvQixTQUFBUyxNQUFBaUUsU0FBQSxTQUlBcEQsZUFEQUMsUUFFQXNDLFlBQUF0QyxXQUlBLElBQUFvRCxXQUFBN0QsU0FBQUMsZUFBQSxXQUNBNEQsV0FBQXhELGlCQUFBLFFBQUEsV0FDQXVCLGFBQ0EsSUFBQTlCLEVBQUFFLFNBQUFDLGVBQUEsbUJBQUFnQixNQUVBL0IsU0FBQVcsTUFBQUMsS0FEQSxLQUFBQSxFQUNBQSxFQUVBLDRCQUdBZ0UsUUFBQUMsSUFBQTdFLFVBQ0FrQixLQUFBRSxNQUFBQyxRQUFBLE9BQ0F5RCxXQUNBaEUsU0FBQUcsY0FBQSx3QkFBQUcsTUFBQUMsUUFBQSxVQUtBLElBQUEwRCxXQUFBakUsU0FBQVcsaUJBQUEsa0JBT0EsU0FBQXVELFdBQ0EsSUFBQUMsRUFBQW5FLFNBQUFXLGlCQUFBLGtCQUNBeUQsRUFBQXBFLFNBQUFDLGVBQUEsZ0JBQ0FvRSxFQUFBLEVBQ0FGLEVBQUF2RCxRQUFBLFNBQUFzQixHQUNBQSxFQUFBakIsUUFBQW9ELEdBQUE1QixXQUFBUCxFQUFBakIsVUFFQW1ELEVBQUFFLFlBQUFELEVBQUEsT0FJQSxTQUFBRSxXQUFBQyxHQUNBLE9BQUFDLE9BQUFDLEtBQUFGLEdBQUFHLE9BQUFDLE9BQUEsU0FBQUMsRUFBQUMsR0FBQSxPQUFBRCxFQUFBQyxHQUFBTixFQUFBTSxHQUFBRCxPQWxCQVosV0FBQXJELFFBQUEsU0FBQW1FLEdBQ0FBLEVBQUExRSxpQkFBQSxTQUFBNkQsVUFDQWEsRUFBQTFFLGlCQUFBLFFBQUE2RCxZQW9CQSxJQUFBYyxlQUFBaEYsU0FBQUcsY0FBQSxjQUNBLFNBQUE2RCxXQUNBLElBQUFpQixFQUFBLEdBRUEsSUFBQSxJQUFBcEUsS0FBQTBELFdBQUFyRixVQUFBLENBQ0ErRixHQUFBQSxnQ0FBQUMsWUFBQXJFLEdBQUEsUUFFQSxJQUFBYSxFQUFBLEdBQ0EsSUFBQSxJQUFBeUQsS0FBQWpHLFNBQUEyQixHQUNBYSxHQUFBQSwyR0FFQXdELFlBQUFDLEdBRkEsa0VBR0FELFlBQUFoRyxTQUFBMkIsR0FBQXNFLElBQUFELFlBQUFoRyxTQUFBMkIsR0FBQXNFLElBQUFqRyxTQUFBMkIsR0FBQXNFLElBSEEsbUNBUUFGLEdBQUFBLHlDQUFBdkQsRUFBQSxRQUVBc0QsZUFBQUksVUFBQUgsRUFHQSxJQUFBSSxPQUFBckYsU0FBQUcsY0FBQSxpQ0FDQW1GLGdCQUFBdEYsU0FBQVcsaUJBQUEsdUJBRUEsU0FBQW9DLFlBQUExQixHQUNBaUUsZ0JBQUFqRSxHQUFBZixNQUFBaUYsZ0JBQUEsVUFDQUQsZ0JBQUFqRSxFQUFBLEdBQUErRCxVQUFBLDhCQUNBQyxPQUFBL0UsTUFBQWtGLE1BQUEsR0FBQW5FLEVBQUEsSUFHQSxTQUFBd0Isa0JBQUF4QixHQUNBaUUsZ0JBQUFqRSxHQUFBZixNQUFBaUYsZ0JBQUEsVUFDQUQsZ0JBQUFqRSxFQUFBLEdBQUErRCxVQUFBLEdBQUEvRCxFQUNBZ0UsT0FBQS9FLE1BQUFrRixNQUFBLEdBQUFuRSxFQUFBLElBSUEsSUFBQTZELGFBQ0EvRixNQUFBLGVBQ0FJLE1BQUEsc0JBQ0FrRSxNQUFBLHFCQUNBOUQsTUFBQSxjQUNBRSxNQUFBLHlCQUNBUixZQUFBLGNBQ0FDLFVBQUEsWUFDQUUsTUFBQSxhQUNBQyxNQUFBLFlBQ0FDLE9BQUEsU0FDQUUsT0FBQSxjQUNBRSxLQUFBLHlCQUNBMkYsZ0JBQUEsa0JBQ0FDLGdCQUFBLDBCQUNBQyxPQUFBLFNBQ0FDLEtBQUEsT0FDQUMsTUFBQSxRQUNBekMsUUFBQSxxQkFDQUMsWUFBQSxzQkFDQUMsUUFBQSxjQUNBQyxVQUFBLGVBQ0FDLFdBQUEsa0JBQ0FzQyxVQUFBLFlBQ0FDLGNBQUEsZ0JBQ0FDLFVBQUEsWUFDQUMsUUFBQSxlQUNBQyxJQUFBLFdBQ0FDLFlBQUEsY0FDQXhDLFlBQUEsZ0JBQ0F5QyxTQUFBLGdCQUNBQyxPQUFBLFNBQ0F6QyxTQUFBLHFCQUNBeEUsWUFBQSIsImZpbGUiOiJidW5kbGUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGxvYW5Gb3JtID0ge1xyXG5cdFwic3RlcDFcIjoge1xyXG5cdFx0XCJjcmVkaXRfdHlwZVwiOiBcIlwiLFxyXG5cdFx0XCJsb2FuX2Ftb3VudFwiOiBcIlwiLFxyXG5cdFx0XCJsb2FuX3Rlcm1cIjogXCJcIlxyXG5cdH0sXHJcblx0XCJzdGVwMlwiOiB7XHJcblx0XHRcImZuYW1lXCI6IFwiXCIsXHJcblx0XHRcImxuYW1lXCI6IFwiXCIsXHJcblx0XHRcImdlbmRlclwiOiBcIlwiXHJcblx0fSxcclxuXHRcclxuXHRcInN0ZXA0XCI6IHtcclxuXHRcdFwic2FsYXJ5XCI6IFwiXCJcclxuXHR9LFxyXG5cdFwic3RlcDVcIjoge1xyXG5cdFx0XCJpbmZvXCI6IFwiXCJcclxuXHR9XHRcclxufVxyXG5cclxuXHJcblxyXG52YXIgY3RhQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N0YS1sb2FuJyk7XHJcbnZhciBpbnRybyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbWFsbC1sb2FuX19zdGFydGVyJyk7XHJcbnZhciBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNtYWxsLWxvYW5fX2Zvcm0nKVxyXG5cclxuY3RhQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PiB7XHJcblx0aW50cm8uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdHNob3dRdWVzdGlvbihwYWdlTm8pO1xyXG5cdGZvcm0uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxufSk7XHJcblxyXG5cclxudmFyIGZvcm1TdGVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbWFsbC1sb2FuX19mb3JtX19zdGVwJyk7XHJcbnZhciBwYWdlTm8gPSAwO1xyXG5cclxuZnVuY3Rpb24gc2hvd1F1ZXN0aW9uKHBhZ2VObykge1xyXG5cdGZvcm1TdGVwcy5mb3JFYWNoKHN0ZXA9PiBzdGVwLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIiApO1xyXG5cdGZvcm1TdGVwc1twYWdlTm9dLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIlxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gZ2V0U2VsZWN0VmFsdWUoc2VsZWN0KSB7XHJcblx0cmV0dXJuIHNlbGVjdFtzZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlUmFkaW8ocmFkaW8pIHtcclxuXHR2YXIgdmFsaWRhdGlvbiA9IGZhbHNlO1xyXG5cdHJhZGlvLmZvckVhY2goZWw9PiB7XHJcblx0XHRpZiAoZWwuY2hlY2tlZCkge1xyXG5cdFx0XHR2YWxpZGF0aW9uID0gdHJ1ZTtcclxuXHRcdFx0cmV0dXJuXHJcblx0XHR9XHJcblx0fSk7XHJcblx0IXZhbGlkYXRpb24/IHNob3dBbGVydChcIlBsZWFzZSBzZWxlY3QgcmFkaW8gYnV0dG9uIHZhbHVlXCIpIDogbnVsbDtcclxuXHRyZXR1cm4gdmFsaWRhdGlvblxyXG59XHJcblxyXG5cclxudmFyIGFsZXJBbmNob3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZ3Jlc3MtYmFyJylcclxuZnVuY3Rpb24gc2hvd0FsZXJ0KG1zZykge1xyXG5cdHZhciBjb250ZW50ID0gYDxkaXYgY2xhc3M9XCJlcnJvcm1zZ1wiPiR7bXNnfTwvZGl2PmBcclxuXHRhbGVyQW5jaG9yLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLGNvbnRlbnQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUFsZXIoKSB7XHJcblx0dmFyIGFsZXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVycm9ybXNnJylcclxuXHRpZiAoIWFsZXJ0KSByZXR1cm47XHJcblx0cmV0dXJuIGFsZXJ0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYWxlcnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSYWRpb1ZhbHVlKHJhZGlvKSB7XHJcblx0dmFyIHZhbHVlID0gJyc7XHJcblx0cmFkaW8uZm9yRWFjaChlbD0+IHtcclxuXHRcdGlmIChlbC5jaGVja2VkKSB7XHJcblx0XHRcdHZhbHVlID0gZWwudmFsdWU7XHJcblx0XHRcdHJldHVyblxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdFxyXG5cdHJldHVybiB2YWx1ZVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXF1aXJlZChpdGVtKSB7XHJcblx0aWYgKGl0ZW0ubGVuZ3RoID09PSAwKSB7XHJcblx0XHRzaG93QWxlcnQoXCJUaGUgbWFuZGF0b3J5IGluZm9ybWF0aW9uIGlzIG1pc3Npbmcgb3IgaW5jb3JyZWN0IVwiKTtcclxuXHRcdHJldHVybiBmYWxzZVxyXG5cdH1cclxuXHRyZXR1cm4gdHJ1ZVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZVRleHQoaW5wdXQpIHtcclxuXHRpZiAoIWlucHV0Lm1hdGNoKC9eW0EtWmEtelxcc10qJC8pKSB7XHJcblx0XHRzaG93QWxlcnQoXCJUaGUgbWFuZGF0b3J5IGluZm9ybWF0aW9uIG11c3QgYmUgbGV0dGVycyBvbmx5IVwiKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWVcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVUZXh0TnVtYmVycyhpbnB1dCkge1xyXG5cdGlmICghaW5wdXQubWF0Y2goL15bMC05YS16QS1aXSskLykpIHtcclxuXHRcdHNob3dBbGVydChcIlRoZSBtYW5kYXRvcnkgaW5mb3JtYXRpb24gbXVzdCBiZSBsZXR0ZXJzICYgbnVtYmVycyBvbmx5IVwiKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWVcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVOdW1iZXIoaW5wdXQpIHtcclxuXHRcclxuXHRpZiAoKHBhcnNlRmxvYXQoaW5wdXQpIDwgMCkgfHwgKGlucHV0Lmxlbmd0aCA+IDEyKSkge1xyXG5cdFx0c2hvd0FsZXJ0KFwiUGxlYXNlIGVudGVyIGNvcnJlY3QgYW1vdW50IChmcm9tIDAgdG8gMTIgZGlnaXRzKVwiKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblx0cmV0dXJuIHRydWVcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbnZhciBidXR0b25CYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWJhY2snKTtcclxuYnV0dG9uQmFja1swXS5zdHlsZS52aXNpYmlsaXR5PSdoaWRkZW4nO1xyXG5idXR0b25CYWNrLmZvckVhY2goYnRuID0+IHtcclxuXHRidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCgpPT4ge1xyXG5cdFx0cmVtb3ZlQWxlcigpO1xyXG5cdFx0cHJvZ3Jlc3NCYXJPbkJhY2socGFnZU5vKTtcclxuXHRcdFxyXG5cdFx0aWYgKHBhZ2VObz4wKSB7XHJcblx0XHRcdHBhZ2VOby0tO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRzaG93UXVlc3Rpb24ocGFnZU5vKTtcclxuXHR9KVxyXG59KTtcclxuXHJcblxyXG52YXIgYXBwbGljYXRpb25Gb3J3YXJkQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FwcGxpY2F0aW9uLWZvcndhcmQnKTtcclxuYXBwbGljYXRpb25Gb3J3YXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuXHRyZW1vdmVBbGVyKCk7XHJcblx0dmFyIGNyZWRpdF90eXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWRpdF90eXBlJyk7XHJcblx0aWYgKCFyZXF1aXJlZChnZXRTZWxlY3RWYWx1ZShjcmVkaXRfdHlwZSkpKSByZXR1cm47XHJcblx0bG9hbkZvcm0uc3RlcDEuY3JlZGl0X3R5cGUgPSBnZXRTZWxlY3RWYWx1ZShjcmVkaXRfdHlwZSk7XHJcblx0XHJcblx0dmFyIGxvYW5fYW1vdW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYW5fYW1vdW50JykudmFsdWU7XHJcblx0aWYgKCFyZXF1aXJlZChsb2FuX2Ftb3VudCkgfHwgIXZhbGlkYXRlTnVtYmVyKGxvYW5fYW1vdW50KSkgcmV0dXJuO1xyXG5cdGxvYW5Gb3JtLnN0ZXAxLmxvYW5fYW1vdW50ID0gbG9hbl9hbW91bnQ7XHJcblx0XHJcblx0dmFyIGxvYW5fdGVybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FuX3Rlcm0nKTtcclxuXHRpZiAoIXJlcXVpcmVkKGdldFNlbGVjdFZhbHVlKGxvYW5fdGVybSkpKSByZXR1cm47XHJcblx0bG9hbkZvcm0uc3RlcDEubG9hbl90ZXJtID0gZ2V0U2VsZWN0VmFsdWUobG9hbl90ZXJtKTtcclxuXHRcclxuXHRwYWdlTm8rKztcclxuXHRzaG93UXVlc3Rpb24ocGFnZU5vKTtcclxuXHRwcm9ncmVzc0JhcihwYWdlTm8pO1xyXG59KTtcclxuXHJcblxyXG5cclxudmFyIGdlbmRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdnZW5kZXInKTtcclxudmFyIGNvbnRhY3RzRm9yd2FyZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWN0cy1mb3J3YXJkJyk7XHJcbmNvbnRhY3RzRm9yd2FyZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57XHJcblx0cmVtb3ZlQWxlcigpO1xyXG5cdHZhciBmbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmbmFtZScpLnZhbHVlO1xyXG5cdGlmICghcmVxdWlyZWQoZm5hbWUpIHx8ICF2YWxpZGF0ZVRleHQoZm5hbWUpICkgcmV0dXJuO1xyXG5cdGxvYW5Gb3JtLnN0ZXAyLmZuYW1lID0gZm5hbWU7XHJcblx0XHJcblx0dmFyIGxuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xuYW1lJykudmFsdWU7XHJcblx0aWYgKCFyZXF1aXJlZChsbmFtZSkgfHwgIXZhbGlkYXRlVGV4dChsbmFtZSkgKSByZXR1cm47XHJcblx0bG9hbkZvcm0uc3RlcDIubG5hbWUgPSBsbmFtZTtcclxuXHRcclxuXHR2YXIgZ2VuZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ2dlbmRlcicpO1xyXG5cdGlmICghdmFsaWRhdGVSYWRpbyhnZW5kZXIpKSByZXR1cm47XHJcblx0bG9hbkZvcm0uc3RlcDIuZ2VuZGVyID0gZ2V0UmFkaW9WYWx1ZShnZW5kZXIpO1xyXG5cdFxyXG5cdHZhciBkb2NObyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkb2NObycpLnZhbHVlO1xyXG5cdGlmICghcmVxdWlyZWQoZG9jTm8pIHx8ICF2YWxpZGF0ZVRleHROdW1iZXJzKGRvY05vKSApIHJldHVybjtcclxuXHRsb2FuRm9ybS5zdGVwMi5kb2NObyA9IGRvY05vO1xyXG5cdFxyXG5cdHBhZ2VObysrO1xyXG5cdHNob3dRdWVzdGlvbihwYWdlTm8pO1xyXG5cdHByb2dyZXNzQmFyKHBhZ2VObyk7XHJcbn0pO1xyXG5cclxuXHJcbnZhciBvYmxpZ2F0aW9uRm9yd2FyZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvYmxpZ2F0aW9uLWZvcndhcmQnKTtcclxub2JsaWdhdGlvbkZvcndhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e1xyXG5cdHJlbW92ZUFsZXIoKTtcclxuXHR2YXIgb2JsVHlwZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvYmxpZ2F0aW9uLXR5cGUnKTtcclxuXHR2YXIgb2JsRmluYW5jZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2JsaWdhdGlvbi1maW5hbmNlcicpO1xyXG5cdHZhciBvYmxUZXJtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29ibGlnYXRpb24tdGVybScpLnZhbHVlO1xyXG5cdHZhciBvYmxBbW91bnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb2JsaWdhdGlvbi1hbW91bnQnKS52YWx1ZTtcclxuXHR2YXIgb2JsUGF5bWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvYmxpZ2F0aW9uLW1vbnRobHktcGF5ZW1lbnQnKS52YWx1ZTtcclxuXHRcclxuXHRcclxuXHRpZiAoIChnZXRTZWxlY3RWYWx1ZShvYmxUeXBlKSAhPSBcIlwiKSB8fCAoZ2V0U2VsZWN0VmFsdWUob2JsRmluYW5jZXIpICE9IFwiXCIpIHx8XHJcblx0XHQob2JsVGVybSAhPSBcIlwiKSB8fCAob2JsQW1vdW50ICE9IFwiXCIpIHx8IChvYmxQYXltZW50ICE9IFwiXCIpKSB7XHJcblx0XHRpZiAoIXJlcXVpcmVkKGdldFNlbGVjdFZhbHVlKG9ibFR5cGUpKSlyZXR1cm47XHJcblx0XHRpZiAoIXJlcXVpcmVkKGdldFNlbGVjdFZhbHVlKG9ibEZpbmFuY2VyKSkpcmV0dXJuO1xyXG5cdFx0aWYgKCFyZXF1aXJlZChvYmxUZXJtKSB8fCAhdmFsaWRhdGVOdW1iZXIob2JsVGVybSkpcmV0dXJuO1xyXG5cdFx0aWYgKCFyZXF1aXJlZChvYmxBbW91bnQpIHx8ICF2YWxpZGF0ZU51bWJlcihvYmxBbW91bnQpKXJldHVybjtcclxuXHRcdGlmICghcmVxdWlyZWQob2JsUGF5bWVudCkgfHwgIXZhbGlkYXRlTnVtYmVyKG9ibFBheW1lbnQpKXJldHVybjtcclxuXHRcdFxyXG5cdFx0aWYgKCFsb2FuRm9ybVtcInN0ZXAzXCJdKXtcclxuXHRcdFx0bG9hbkZvcm1bXCJzdGVwM1wiXSA9IHt9O1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRsb2FuRm9ybS5zdGVwMy5vYmxUeXBlID0gZ2V0U2VsZWN0VmFsdWUob2JsVHlwZSk7XHJcblx0XHRsb2FuRm9ybS5zdGVwMy5vYmxGaW5hbmNlciA9IGdldFNlbGVjdFZhbHVlKG9ibEZpbmFuY2VyKTtcclxuXHRcdGxvYW5Gb3JtLnN0ZXAzLm9ibFRlcm0gPSBvYmxUZXJtO1xyXG5cdFx0bG9hbkZvcm0uc3RlcDMub2JsQW1vdW50ID0gb2JsQW1vdW50O1xyXG5cdFx0bG9hbkZvcm0uc3RlcDMub2JsUGF5bWVudCA9IG9ibFBheW1lbnQ7XHJcblx0XHRcclxuXHR9IGVsc2UgaWYgKGxvYW5Gb3JtW1wic3RlcDNcIl0pIGRlbGV0ZSBsb2FuRm9ybS5zdGVwMztcclxuXHRcclxuXHRwYWdlTm8rKztcclxuXHRzaG93UXVlc3Rpb24ocGFnZU5vKTtcclxuXHRwcm9ncmVzc0JhcihwYWdlTm8pO1xyXG59KTtcclxuXHJcblxyXG52YXIgaW5jb21lRm9yd2FyZEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbmNvbWUtZm9yd2FyZCcpO1xyXG5pbmNvbWVGb3J3YXJkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuXHRyZW1vdmVBbGVyKCk7XHJcblx0dmFyIHNhbGFyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYWxhcnknKS52YWx1ZTtcclxuXHRpZiAoIXJlcXVpcmVkKHNhbGFyeSkgfHwgIXZhbGlkYXRlTnVtYmVyKHNhbGFyeSkpIHJldHVybjtcclxuXHRsb2FuRm9ybS5zdGVwNC5zYWxhcnkgPSBzYWxhcnk7XHJcblx0XHJcblx0dmFyIGluY29tZU90aGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luY29tZS1vdGhlcicpLnZhbHVlO1xyXG5cdGlmICgoaW5jb21lT3RoZXIgIT09IFwiXCIpICYmIHZhbGlkYXRlTnVtYmVyKGluY29tZU90aGVyKSkge1xyXG5cdFx0bG9hbkZvcm0uc3RlcDQuaW5jb21lT3RoZXIgPSBpbmNvbWVPdGhlcjtcclxuXHR9IGVsc2UgaWYgKGxvYW5Gb3JtLnN0ZXA0W1wiaW5jb21lT3RoZXJcIl0pIGRlbGV0ZSBsb2FuRm9ybS5zdGVwNC5pbmNvbWVPdGhlcjtcclxuXHRcclxuXHR2YXIgZW1wbG95ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZkVtcGxveWVyJyk7XHJcblx0aWYgKGVtcGxveWVyLmNoZWNrZWQpIHtcclxuXHRcdGxvYW5Gb3JtLnN0ZXA0LmVtcGxveWVyID0gZW1wbG95ZXIudmFsdWU7XHJcblx0fSBlbHNlIHtcclxuXHRcdGxvYW5Gb3JtLnN0ZXA0LmVtcGxveWVyID0gXCJ3b3JrZXJcIlxyXG5cdH07XHJcblx0XHJcblx0cGFnZU5vKys7XHJcblx0c2hvd1F1ZXN0aW9uKHBhZ2VObyk7XHJcblx0cHJvZ3Jlc3NCYXIocGFnZU5vKTtcclxufSk7XHJcblxyXG5cclxudmFyIGNvbmZpcm1CdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybScpO1xyXG5jb25maXJtQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCk9PntcclxuXHRyZW1vdmVBbGVyKCk7XHJcblx0dmFyIGluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkaXRpb25hbC1pbmZvJykudmFsdWU7XHJcblx0aWYgKGluZm8gIT09IFwiXCIpIHtcclxuXHRcdGxvYW5Gb3JtLnN0ZXA1LmluZm8gPSBpbmZvO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRsb2FuRm9ybS5zdGVwNS5pbmZvID0gXCJObyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXCI7XHJcblx0fVxyXG5cdFxyXG5cdGNvbnNvbGUubG9nKGxvYW5Gb3JtKVxyXG5cdGZvcm0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG5cdHByaW50T3V0KCk7XHJcblx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNtYWxsLWxvYW5fX3Jlc3VsdHMnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG5cdFxyXG59KTtcclxuXHJcblxyXG52YXIgYWxsSW5jb21lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1hbGxJbmNvbWVzJyk7XHJcbmFsbEluY29tZXMuZm9yRWFjaChpbmNvbWUgPT4ge1xyXG5cdGluY29tZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBzdW1hcml6ZSk7XHJcblx0aW5jb21lLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJyxzdW1hcml6ZSk7XHJcbn0pO1xyXG5cclxuXHJcbmZ1bmN0aW9uIHN1bWFyaXplKCkge1xyXG5cdHZhciBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1hbGxJbmNvbWVzJyk7XHJcblx0dmFyIHNob3dUb3RJbmNvbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG90YWwtaW5jb21lJyk7XHJcblx0dmFyIHN1bSA9IDA7XHJcblx0aXRlbXMuZm9yRWFjaChpdGVtID0+IHtcclxuXHRcdGlmIChpdGVtLnZhbHVlKSBzdW0gKz0gcGFyc2VGbG9hdChpdGVtLnZhbHVlKTtcclxuXHR9KTtcclxuXHRzaG93VG90SW5jb21lLnRleHRDb250ZW50ID0gYCR7c3VtfSBFVVJgO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc29ydE9iamVjdChvKSB7XHJcblx0cmV0dXJuIE9iamVjdC5rZXlzKG8pLnNvcnQoKS5yZWR1Y2UoKHIsIGspID0+IChyW2tdID0gb1trXSwgciksIHt9KTtcclxufVxyXG5cclxuXHJcbnZhciBwcmludENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcmludC1vdXQnKVxyXG5mdW5jdGlvbiBwcmludE91dCgpIHtcclxuXHR2YXIgaHRtbCA9ICcnO1xyXG5cdFxyXG5cdGZvciAodmFyIHN0ZXAgaW4gc29ydE9iamVjdChsb2FuRm9ybSkpe1xyXG5cdFx0aHRtbCArPSBgPGgzIGNsYXNzPVwiaGVhZGluZy10ZXJ0aWFyeVwiPiR7cHJpbnRWYWx1ZXNbc3RlcF19PC9oMz5gO1xyXG5cdFx0XHJcblx0XHR2YXIgY29udGVudCA9ICcnO1xyXG5cdFx0Zm9yICh2YXIgc3RlcGtleSBpbiBsb2FuRm9ybVtzdGVwXSkge1xyXG5cdFx0XHRjb250ZW50ICs9IGBcclxuXHRcdFx0XHRcdDxsaSBjbGFzcz1cInNtYWxsLWxvYW5fX3Jlc3VsdHNfX2l0ZW1zXCI+XHJcblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwic21hbGwtbG9hbl9fcmVzdWx0c19fa2V5XCI+JHtwcmludFZhbHVlc1tzdGVwa2V5XX08L3NwYW4+XHJcblx0XHRcdFx0XHRcdDxzcGFuIGNsYXNzPVwic21hbGwtbG9hbl9fcmVzdWx0c19fdmFsdWVcIj4keyBwcmludFZhbHVlc1tsb2FuRm9ybVtzdGVwXVtzdGVwa2V5XV0/IHByaW50VmFsdWVzW2xvYW5Gb3JtW3N0ZXBdW3N0ZXBrZXldXSA6IGxvYW5Gb3JtW3N0ZXBdW3N0ZXBrZXldICB9PC9zcGFuPlxyXG5cdFx0XHRcdFx0PC9saT5cclxuXHRcdFx0YDtcclxuXHRcdH07XHJcblx0XHRcclxuXHRcdGh0bWwgKz0gYDx1bCBjbGFzcz1cInNtYWxsLWxvYW5fX3Jlc3VsdHNfX2xpc3RcIj4ke2NvbnRlbnR9PC91bD5gO1xyXG5cdH1cclxuXHRwcmludENvbnRhaW5lci5pbm5lckhUTUwgPSBodG1sO1xyXG59XHJcblxyXG52YXIgZmlsbGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2dyZXNzLWJhcl9faC1saW5lLS1maWxsZXInKVxyXG52YXIgcHJvZ3Jlc0JhckJ1bGJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2dyZXNzLWJhcl9faXRlbScpXHJcblxyXG5mdW5jdGlvbiBwcm9ncmVzc0JhcihlbCkge1xyXG5cdHByb2dyZXNCYXJCdWxic1tlbF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZWU3MDIzXCI7XHJcblx0cHJvZ3Jlc0JhckJ1bGJzW2VsLTFdLmlubmVySFRNTCA9ICc8aSBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9pPidcclxuXHRmaWxsZXIuc3R5bGUud2lkdGggPSBgJHtlbCoyNX0lYFxyXG59XHJcblxyXG5mdW5jdGlvbiBwcm9ncmVzc0Jhck9uQmFjayhlbCkge1xyXG5cdHByb2dyZXNCYXJCdWxic1tlbF0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjZmRjMTI5XCI7XHJcblx0cHJvZ3Jlc0JhckJ1bGJzW2VsLTFdLmlubmVySFRNTCA9IGAke2VsfWA7XHJcblx0ZmlsbGVyLnN0eWxlLndpZHRoID0gYCR7ZWwqMjV9JWBcclxufVxyXG5cclxuXHJcbnZhciBwcmludFZhbHVlcyA9IHtcclxuXHRcInN0ZXAxXCI6XCJMb2FuIGRldGFpbHNcIixcclxuXHRcInN0ZXAyXCI6XCJDb250YWN0IGluZm9ybWF0aW9uXCIsXHJcblx0XCJzdGVwM1wiOlwiT2JsaWdhdGlvbiBkZXRhaWxzXCIsXHJcblx0XCJzdGVwNFwiOlwiWW91ciBpbmNvbWVcIixcclxuXHRcInN0ZXA1XCI6XCJBZGRpdGlvbmFsIGluZm9ybWF0aW9uXCIsXHJcblx0XCJsb2FuX2Ftb3VudFwiOlwiTG9hbiBhbW91bnRcIixcclxuXHRcImxvYW5fdGVybVwiOlwiTG9hbiB0ZXJtXCIsXHJcblx0XCJmbmFtZVwiOlwiRmlyc3QgbmFtZVwiLFxyXG5cdFwibG5hbWVcIjpcIkxhc3QgbmFtZVwiLFxyXG5cdFwiZ2VuZGVyXCI6XCJHZW5kZXJcIixcclxuXHRcInNhbGFyeVwiOlwiTWFpbiBJbmNvbWVcIixcclxuXHRcImluZm9cIjpcIkFkZGl0aW9uYWwgaW5mb3JtYXRpb25cIixcclxuXHRcInBlcnNvbmFsX2NyZWRpdFwiOlwiUGVyc29uYWwgY3JlZGl0XCIsXHJcblx0XCJmYW1pbHlIaF9jcmVkaXRcIjpcIkZhbWlseS9ob3VzZWhvbGQgY3JlZGl0XCIsXHJcblx0XCJmZW1hbGVcIjpcIkZlbWFsZVwiLFxyXG5cdFwibWFsZVwiOlwiTWFsZVwiLFxyXG5cdFwib3RoZXJcIjpcIk90aGVyXCIsXHJcblx0XCJvYmxUeXBlXCI6XCJUeXBlIG9mIG9ibGlnYXRpb25cIixcclxuXHRcIm9ibEZpbmFuY2VyXCI6XCJPYmxpZ2F0aW9uIGZpbmFuY2VyXCIsXHJcblx0XCJvYmxUZXJtXCI6XCJUZXJtICh5ZWFyKVwiLFxyXG5cdFwib2JsQW1vdW50XCI6XCJBbW91bnQvbGltaXRcIixcclxuXHRcIm9ibFBheW1lbnRcIjpcIk1vbnRobHkgcGF5bWVudFwiLFxyXG5cdFwiaG9tZV9sb2FuXCI6XCJIb21lIGxvYW5cIixcclxuXHRcImNvbnN1bWVyX2xvYW5cIjpcIkNvbnN1bWVyIGxvYW5cIixcclxuXHRcImNhcl9sZWFzZVwiOlwiQ2FyIGxlYXNlXCIsXHJcblx0XCJsdW1pbm9yXCI6XCJMdW1pbm9yIEJhbmtcIixcclxuXHRcInNlYlwiOlwiU0VCIEJhbmtcIixcclxuXHRcImZhc3RfY3JlZGl0XCI6XCJGYXN0IENyZWRpdFwiLFxyXG5cdFwiaW5jb21lT3RoZXJcIjpcIk90aGVyIEluY29tZXNcIixcclxuXHRcInNlbGZlbXBsXCI6XCJTZWxmIGVtcGxveWVlXCIsXHJcblx0XCJ3b3JrZXJcIjpcIldvcmtlclwiLFxyXG5cdFwiZW1wbG95ZXJcIjpcIlR5cGUgb2YgZW1wbG95bWVudFwiLFxyXG5cdFwiY3JlZGl0X3R5cGVcIjpcIlR5cGUgb2YgQ3JlZGl0XCIsXHJcbn07Il19
